<div ng-init='!editing'>
  <div class="row" ng-show='!editing' ng-cloak>
    <h2>{{profile.user.username}}'s page</h2>
    <h4>{{profile.user.email}}</h4>
    <img ng-src="https://secure.gravatar.com/avatar/{{profile.user.gravatar_hash}}">
    <h4>Location: {{profile.user.location}}</h4>
    <h4>About:</h4>
    <p>{{profile.user.about}}</p>
    <p>Your languages:</p>
    <ul class='list-unstyled'>
      <li ng-repeat='language in profile.user.languages'>{{language.name}}</li>
    </ul>
  </div>

  <div class='row' ng-show='editing' ng-cloak>
    <p>
      <label>Username</label>
      <input type="text" class='form-control' ng-model='profile.user.username'>
    </p>

    <p>
      <label>Email</label>
      <input type="email" class='form-control' ng-model='profile.user.email'>
    </p>

    <p>
      <label>About</label>
      <textarea class='form-control' ng-model='profile.user.about' cols="30" rows="10"></textarea>
    </p>
  </div>

  <button ng-show='!editing' ng-click='editing = !editing'>Edit Profile</button>
  <button ng-show='editing' ng-click='editing = !editing; profile.saveChanges(profile.user);'>Save Changes</button>
</div>
